{% extends "layout.html" %}
{% block page_title %}About content{% endblock %}

{% block content %}

<a href="/document-tasks" class="govuk-c-back-link">Back</a>
<main role="main" class="govuk-o-main-wrapper">
  <form action="/document-tasks" method="post" class="form about" data-module="slug-from-title">
    <div class="govuk-o-grid">
      <div class="govuk-o-grid__item govuk-o-grid__item--two-thirds">
        <h1 class="form-title govuk-heading-xl">
          <span class="govuk-caption-xl">{{ data['format'] }}</span>
          {% if data['title'] %}
            {{ data['title'] }}
          {% else %}
            About this news article
          {% endif %}
        </h1>
      </div>
    </div>
    <h2 class="govuk-heading-l">Monitoring</h2>
    <div class="govuk-c-radios">
      <fieldset class="govuk-c-fieldset">
        <legend class="govuk-c-fieldset__legend">
          Frequency of update
        </legend>
        {% set fields = [
            {
              name: 'Never, this is a one-off',
              more: 'Because this content won\'t be updated, it will be downgraded as more recent content is published on GOV.UK'
            },
            {
              name: 'Quarterly',
              more: 'You will be reminded to update this content on the quarter after it was published.'
            },
            {
              name: 'Yearly',
              more: 'You will be reminded to update this content on the quarter after it was published.'
            },
            {
              name: 'Other',
              more: '<label class="govuk-c-label" for="">Enter the date for the expected update</label>
              <input type="text" name="" class="govuk-c-input govuk-!-width-one-quarter" id="expected-audience" value="">'
            }
          ]
        %}
        {% for field in fields %}
          <div class="govuk-c-radios__item" data-target="radio-part-{{ loop.index }}-extra">
            <input id="radio-part-{{ loop.index }}" type="radio" name="frequency" value="{{ field.name }}" class="govuk-c-radios__input" {{ checked("frequency", field.name) }}>
            <label for="radio-part-{{ loop.index }}" class="govuk-c-label govuk-c-radios__label">
              {{ field.name }}
              {% if field.more %}
              <div class="panel panel-border-wide js-hidden govuk-!-mt-r4 govuk-!-mb-r4" id="radio-part-{{ loop.index }}-extra">
                {{ field.more | safe }}
              </div>
              {% endif %}
            </label>
          </div>
        {% endfor %}
      </fieldset>
    </div>
    <div class="govuk-o-grid">
      <div class="govuk-o-grid__item govuk-o-grid__item--two-thirds">
        <div class="govuk-!-mb-r6 is-input">
          <label class="govuk-c-label" for="expected-audience">Expected audience</label>
          <input type="text" name="expected-audience" class="govuk-c-input govuk-!-width-one-quarter" id="expected-audience" value="{{data['expected-audience']}}"> <span class="inline govuk-body">views per month</span>
        </div>
      </div>
    </div>
    <div class="govuk-o-grid">
      <div class="govuk-o-grid__item govuk-o-grid__item--two-thirds">
        <h2 class="govuk-heading-l">Tag on GOV.UK</h2>
        <p class="govuk-body">Tags help position this content in <a href="">GOV.UK</a>, they make it easier to find by relating it to existing content that is similar to it.</p>
      </div>
    </div>
    <div class="govuk-o-grid govuk-!-mb-r6" data-module="select-tags">
      <div class="govuk-o-grid__item govuk-o-grid__item--full">
        <div class="js-none-selected">
          <h3 class="govuk-heading-s">Selected tags</h3>
          <p class="govuk-body empty govuk-!-mb-r6">You haven't selected any tags yet.</p>
        </div>
        <table class="govuk-c-table js-selected-tags-table" style="display: none">
          <caption class="govuk-c-table__caption">Selected tags</caption>
          <tbody class="govuk-c-table__body">
            <tr class="govuk-c-table__row js-selected-tag-row" style="display: none">
              <td class="govuk-c-table__cell tag js-tag"></td>
              <td class="govuk-c-table__cell govuk-c-table__cell--numeric"><a href="#">View in GOV.UK</a></td>
              <td class="govuk-c-table__cell govuk-c-table__cell--numeric"><a href="" class="js-remove-tag">Remove tag</a></td>
            </tr>
          </tbody>
        </table>

        <table class="govuk-c-table js-suggested-tags-table">
          <caption class="govuk-c-table__caption">Suggested tags</caption>
          <tbody class="govuk-c-table__body">
            <tr class="govuk-c-table__row">
              <td class="govuk-c-table__cell tag">Transport <span class="arrow">></span> Driving instruction and driving lessons <span class="arrow">></span> Approved Driving Instructor registration and renewals</td>
              <td class="govuk-c-table__cell govuk-c-table__cell--numeric"><a href="#">View in GOV.UK</a></td>
              <td class="govuk-c-table__cell govuk-c-table__cell--numeric"><a href="" class="js-select-tag">Select tag</a></td>
            </tr>
            <tr class="govuk-c-table__row">
              <td class="govuk-c-table__cell tag">Transport <span class="arrow">></span> Driving instruction and driving lessons <span class="arrow">></span> Driving instructor standards and conduct</td>
              <td class="govuk-c-table__cell govuk-c-table__cell--numeric"><a href="#">View in GOV.UK</a></td>
              <td class="govuk-c-table__cell govuk-c-table__cell--numeric"><a href="" class="js-select-tag">Select tag</a></td>
            </tr>
            <tr class="govuk-c-table__row">
              <td class="govuk-c-table__cell tag">Transport <span class="arrow">></span> Driving and road transport <span class="arrow">></span> Vehicle ownership <span class="arrow">></span> MOTs (car and motorcycle) <span class="arrow">></span> MOT status of a vehicle</td>
              <td class="govuk-c-table__cell govuk-c-table__cell--numeric"><a href="#">View in GOV.UK</a></td>
              <td class="govuk-c-table__cell govuk-c-table__cell--numeric"><a href="" class="js-select-tag">Select tag</a></td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="govuk-o-grid__item govuk-o-grid__item--two-thirds">
        <label class="govuk-c-label" for="tag-search">Search for a tag</label>
        <select id="tag-search" name="tag-search">
          {% include "includes/topics-select-options.html" %}
        </select>
      </div>
      <div class="govuk-o-grid__item govuk-o-grid__item--one-third govuk-!-mt-r7">
        <a href="" class="inline button button-link govuk-body js-add-tag">Select tag</a>
      </div>
    </div>

    <div class="govuk-o-grid">
      <div class="govuk-o-grid__item govuk-o-grid__item--two-thirds">
        <div class="govuk-!-mb-r6 is-input">
          <h2 class="govuk-heading-l">Associations</h2>
          <label class="govuk-c-label" for="lead-organisation">Lead organisation</label>
          <select id="lead-organisation" name="lead-organisation">
            {% include "includes/organisation-select-options.html" %}
          </select>
          <div class="govuk-!-mt-r2 govuk-!-mb-r6">
            <a href="#" class="button button-link govuk-body">Add another leading organisation</a>
          </div>

          <label class="govuk-c-label" for="supporting-organisation">Supporting organisation</label>
          <select id="supporting-organisation" name="supporting-organisation">
            {% include "includes/organisation-select-options.html" %}
          </select>
          <div class="govuk-!-mt-r2 govuk-!-mb-r6">
            <a href="#" class="button button-link govuk-body">Add another supporting organisation</a>
          </div>

          <label class="govuk-c-label" for="minister">Minister</label>
          <input type="text" name="minister" class="govuk-c-input" id="minister" value="{{data['minister']}}">

          <label class="govuk-c-label" for="topical-event">Topical events</label>
          <input type="text" name="topical-event" class="govuk-c-input" id="topical-event" value="{{data['topical-event']}}">

          <label class="govuk-c-label" for="world-locations">World locations</label>
          <input type="text" name="world-locations" class="govuk-c-input" id="world-locations" value="{{data['world-locations']}}">
        </div>
      </div>
    </div>
    <div class="govuk-!-mb-r6">
      <input type="submit" class="govuk-c-button" value="Save">
    </div>

    <div class="govuk-!-mb-r6">
      <a href="/document-tasks" class="button button-link govuk-body">Discard changes</a>
    </div>
  </form>
</main>
{% endblock %}

{% block page_scripts %}
<script>
  $('#lead-organisation').val('{{ data['lead-organisation'] }}');
  $('#supporting-organisation').val('{{ data['supporting-organisation'] }}');

  govukGovernmentOrganisationsAutocomplete({
    selectElement: document.getElementById('lead-organisation'),
    showAllValues: false,
    minLength: 2,
    defaultValue: '{{ data['lead-organisation'] }}'
  })

  govukGovernmentOrganisationsAutocomplete({
    selectElement: document.getElementById('supporting-organisation'),
    showAllValues: false,
    minLength: 2,
    defaultValue: '{{ data['lead-organisation'] }}'
  })

  accessibleAutocomplete.enhanceSelectElement({
    selectElement: document.getElementById('tag-search'),
    id: 'tag-search',
    showAllValues: true,
    minLength: 2,
    defaultValue: ''
  })
</script>
{% endblock %}
